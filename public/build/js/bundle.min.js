!function(){const t=document.querySelector("div .exito");t&&setTimeout(()=>{t.remove()},3e3)}(),function(){const t=document.querySelector("#maquina_id");if(t){let e=[],o=[];const n=document.querySelector("#listado-maquinas");!async function(){const t=location.origin+"/admin/api/maquinas",o=await fetch(t);resultado=await o.json(),function(t=[]){e=t.map(t=>({nombre:""+t.nombre.trim(),id:t.id})),console.log(e)}(resultado)}(),t.addEventListener("input",(function(t){const a=t.target.value;if(a.length>3){const t=new RegExp(a,"i");o=e.filter(e=>{if(-1!=e.nombre.toLowerCase().search(t))return e})}else o=[];!function(){for(;n.firstChild;)n.removeChild(n.firstChild);if(o.length>0)o.forEach(t=>{const e=document.createElement("LI");e.classList.add("listado-maquinas__maquina"),e.textContent=t.nombre,e.dataset.id=t.id,n.appendChild(e)});else{const t=document.createElement("P");t.classList.add("listado-maquinas__no-resultado"),t.textContent="No hay resultados",n.appendChild(t)}}()}))}}(),document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector("#filtros_ventas");t&&t.addEventListener("input",(function(){const t=this.value.toLowerCase();document.querySelectorAll("#tabla .table__tr").forEach(e=>{const o=e.cells[0].textContent.toLowerCase(),n=e.cells[1].textContent.toLowerCase(),a=e.cells[2].textContent.toLowerCase(),i=e.cells[3].textContent.toLowerCase(),c=e.cells[4].textContent.toLowerCase();console.log(o,n,a,i,c),o.includes(t)||n.includes(t)||a.includes(t)||i.includes(t)||c.includes(t)?e.style.display="":e.style.display="none"})}))}));const apiUrl=location.origin+"/admin/api/ApiMateriaPrima";let ultimaDeteccion={};const bloqueoTiempo=2e3;function mostrarNotificacion(t){const e=document.getElementById("notificacion");e.textContent=t,e.classList.add("mostrar"),setTimeout(()=>{e.classList.remove("mostrar")},3e3)}function iniciarEscaner(){Quagga.init({inputStream:{type:"LiveStream",target:document.querySelector("#scanner"),constraints:{facingMode:"environment",width:400,height:250}},decoder:{readers:["code_128_reader"]}},(function(t){t?console.error(t):Quagga.start()})),Quagga.onDetected(t=>{const e=t.codeResult.code,o=(new Date).getTime();ultimaDeteccion[e]&&o-ultimaDeteccion[e]<2e3||(ultimaDeteccion[e]=o,console.log("Código detectado:",e),buscarProducto(e))})}async function buscarProducto(t){const e=document.getElementById("status");try{const o=await fetch(apiUrl);if(!o.ok)throw new Error("Error al cargar la API");const n=(await o.json()).find(e=>e.barcode===t);n?(e.textContent=`Producto ${t} encontrado. Redirigiendo...`,e.style.color="#28a745",mostrarNotificacion("Producto encontrado: Redirigiendo al ID "+n.id),setTimeout(()=>{window.open(`${location.origin}/admin/produccion/materia/editar?id=${n.id}`,"_blank")},3e3)):(e.textContent=`Código ${t} no encontrado en la base de datos.`,e.style.color="#dc3545",mostrarNotificacion(`Código ${t} no encontrado.`))}catch(t){console.error("Error al buscar el producto:",t),e.textContent="Error al buscar el producto.",e.style.color="#dc3545",mostrarNotificacion("Error al buscar el producto.")}}iniciarEscaner();
//# sourceMappingURL=bundle.js.map
