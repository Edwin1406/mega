!function(){const e=document.querySelector("div .exito");e&&setTimeout(()=>{e.remove()},3e3)}(),function(){const e=document.querySelector("#maquina_id");if(e){let t=[],n=[];const o=document.querySelector("#listado-maquinas");!async function(){const e=location.origin+"/admin/api/maquinas",n=await fetch(e);resultado=await n.json(),function(e=[]){t=e.map(e=>({nombre:""+e.nombre.trim(),id:e.id})),console.log(t)}(resultado)}(),e.addEventListener("input",(function(e){const a=e.target.value;if(a.length>3){const e=new RegExp(a,"i");n=t.filter(t=>{if(-1!=t.nombre.toLowerCase().search(e))return t})}else n=[];!function(){for(;o.firstChild;)o.removeChild(o.firstChild);if(n.length>0)n.forEach(e=>{const t=document.createElement("LI");t.classList.add("listado-maquinas__maquina"),t.textContent=e.nombre,t.dataset.id=e.id,o.appendChild(t)});else{const e=document.createElement("P");e.classList.add("listado-maquinas__no-resultado"),e.textContent="No hay resultados",o.appendChild(e)}}()}))}}(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#filtros_ventas");e&&e.addEventListener("input",(function(){const e=this.value.toLowerCase();document.querySelectorAll("#tabla .table__tr").forEach(t=>{const n=t.cells[0].textContent.toLowerCase(),o=t.cells[1].textContent.toLowerCase(),a=t.cells[2].textContent.toLowerCase(),c=t.cells[3].textContent.toLowerCase(),r=t.cells[4].textContent.toLowerCase();console.log(n,o,a,c,r),n.includes(e)||o.includes(e)||a.includes(e)||c.includes(e)||r.includes(e)?t.style.display="":t.style.display="none"})}))})),function(){const e=location.origin+"/admin/api/apicajablanco";let t,n=[];async function o(){try{const t=await fetch(e),o=await t.json();n=o,function(e){const t=[...new Set(e.map(e=>e.gramaje))],n=[...new Set(e.map(e=>e.ancho))],o=document.getElementById("filterGramaje");t.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,o.appendChild(t)});const a=document.getElementById("filterAncho");n.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,a.appendChild(t)})}(o),c(o),r(o)}catch(e){console.error("Error al obtener los datos de la API:",e)}}function a(){const e=document.getElementById("filterGramaje").value,t=document.getElementById("filterAncho").value;let o=n;"all"!==e&&(o=o.filter(t=>t.gramaje===e)),"all"!==t&&(o=o.filter(e=>e.ancho===t)),c(o),r(o)}function c(e){const n=[...new Set(e.map(e=>e.gramaje))],o={series:[...new Set(e.map(e=>e.ancho))].map(t=>({name:`Ancho : ${t}m`,data:n.map(n=>e.filter(e=>e.ancho===t&&e.gramaje===n).reduce((e,t)=>e+parseFloat(t.existencia),0))})),chart:{type:"bar",height:400,stacked:!0,toolbar:{show:!0}},plotOptions:{bar:{horizontal:!1,borderRadius:4}},dataLabels:{enabled:!0},xaxis:{categories:n,title:{text:"Gramajes"}},yaxis:{title:{text:"Existencias Totales"}},legend:{position:"top"},fill:{opacity:1}};t?t.updateOptions(o):(t=new ApexCharts(document.querySelector("#chart"),o),t.render())}function r(e){const t=$("#dataTable").DataTable();t.clear(),e.forEach(e=>{t.row.add([e.ancho,e.gramaje,e.existencia,e.descripcion])}),t.draw()}document.getElementById("filterGramaje").addEventListener("change",a),document.getElementById("filterAncho").addEventListener("change",a),$(document).ready(()=>{$("#dataTable").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json"}}),o()})}(),function(){const e=location.origin+"/admin/api/ApiMateriaPrima";let t={};function n(e){const t=document.getElementById("notificacion");t.textContent=e,t.classList.add("mostrar"),setTimeout(()=>{t.classList.remove("mostrar")},3e3)}Quagga.init({inputStream:{type:"LiveStream",target:document.querySelector("#scanner"),constraints:{facingMode:"environment",width:400,height:250}},decoder:{readers:["code_128_reader"]}},(function(e){e&&console.error(e),Quagga.start()})),Quagga.onDetected(o=>{const a=o.codeResult.code,c=(new Date).getTime();t[a]&&c-t[a]<2e3||(t[a]=c,console.log("Código detectado:",a),async function(t){const o=document.getElementById("status");try{const a=await fetch(e);if(!a.ok)throw new Error("Error al cargar la API");const c=(await a.json()).find(e=>e.barcode===t);c?(o.textContent=`Producto ${t} encontrado. Redirigiendo...`,o.style.color="#28a745",n("Producto encontrado: Redirigiendo al ID "+c.id),setTimeout(()=>{window.open(`${location.origin}/admin/produccion/materia/editar?id=${c.id}`,"_blank")},3e3)):(o.textContent=`Código ${t} no encontrado en la base de datos.`,o.style.color="#dc3545",n(`Código ${t} no encontrado.`))}catch(e){console.error("Error al buscar el producto:",e),o.textContent="Error al buscar el producto.",o.style.color="#dc3545",n("Error al buscar el producto.")}}(a))})}();
//# sourceMappingURL=bundle.js.map
