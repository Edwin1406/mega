!function(){const e=document.querySelector("div .exito");e&&setTimeout(()=>{e.remove()},3e3)}(),function(){const e=document.querySelector("#maquina_id");if(e){let n=[],o=[];const a=document.querySelector("#listado-maquinas");!async function(){const e=location.origin+"/admin/api/maquinas",o=await fetch(e);resultado=await o.json(),function(e=[]){n=e.map(e=>({nombre:""+e.nombre.trim(),id:e.id})),console.log(n)}(resultado)}(),e.addEventListener("input",(function(e){const t=e.target.value;if(t.length>3){const e=new RegExp(t,"i");o=n.filter(n=>{if(-1!=n.nombre.toLowerCase().search(e))return n})}else o=[];!function(){for(;a.firstChild;)a.removeChild(a.firstChild);if(o.length>0)o.forEach(e=>{const n=document.createElement("LI");n.classList.add("listado-maquinas__maquina"),n.textContent=e.nombre,n.dataset.id=e.id,a.appendChild(n)});else{const e=document.createElement("P");e.classList.add("listado-maquinas__no-resultado"),e.textContent="No hay resultados",a.appendChild(e)}}()}))}}(),function(){console.log(50);let e={liner_id:"",pedido_id:"",pedido2_id:"",bobinaInterna_id:"",bobinaIntermedia_id:"",bobinaExterna_id:""};async function n(){const{pedido_id:n}=e;try{const e=`${location.origin}/admin/api/pedidos?pedido_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}async function o(){const{pedido2_id:n}=e;try{const e=`${location.origin}/admin/api/apipedido2?pedido2_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}async function a(){try{const e=location.origin+"/admin/api/allbobinas",n=await fetch(e),o=await n.json();return console.log(o),o}catch(e){console.log(e)}}async function t(){const{liner_id:n}=e;try{const e=`${location.origin}/admin/api/test?liner_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}async function i(){const{bobinaInterna_id:n}=e;try{const e=`${location.origin}/admin/api/apibobinas?bobinaInterna_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}async function c(){const{bobinaExterna_id:n}=e;try{const e=`${location.origin}/admin/api/apibobina_externa?bobinaExterna_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}async function r(){const{bobinaIntermedia_id:n}=e;try{const e=`${location.origin}/admin/api/apibobina_media?bobinaIntermedia_id=${n}`,o=await fetch(e),a=await o.json();return console.log(a),a}catch(e){console.log(e)}}function s(e,n,o,a,t){Swal.fire({title:e,text:n,icon:o,iconColor:a,confirmButtonText:"Entendido",confirmButtonColor:"#3085d6",background:t,color:"#000000",customClass:{popup:"swal-wide"}})}async function d(){const e=await i(),n=await c(),o=await r(),a=await t(),d=parseFloat(e.gramaje)||0,l=parseFloat(n.gramaje)||0,u=parseFloat(o.gramaje)||0,m=d+l+u,p=parseFloat(a.peso);if(d>0&&l>0&&u>0)return async function(){const e=await i(),n=await c(),o=await r(),a=parseFloat(e.ancho)||0,t=parseFloat(o.ancho)||0,d=parseFloat(n.ancho)||0;a&&t&&d?a===t&&t===d?setTimeout(()=>{s("Ancho correcto",`Los anchos de las bobinas seleccionadas son iguales: ${a} cm`,"success","#28a745","#d4edda")},4e3):setTimeout(()=>{s("Anchos incorrectos",`Los anchos de las bobinas seleccionadas no coinciden: Int: ${a} cm, Media: ${t} cm`,"error","#ff0000","#f8d7da")},4e3):console.log("Error: Los anchos internos y medios deben estar llenos")}(),p===m?(console.log("Gramaje total:",m),document.getElementById("gramaje_total").value=m,s("Gramaje correcto",`El gramaje total de las bobinas seleccionadas es: ${m} gr`,"success","#28a745","#d4edda"),m):(s("Gramaje no coincide",`Gramaje recomendado para el test ${a.test} : Int: ${a.liner_interno}gr, Media: `+a.liner_medio+"gr, Externo: "+a.liner_externo+"gr","error","#ff0000","#f8d7da"),void(document.getElementById("gramaje_total").value=""));console.log("Aún no se han seleccionado todas las bobinas necesarias.")}async function l(){try{const e=location.origin+"/admin/api/allpedidos",n=await fetch(e);return await n.json()}catch(e){console.log(e)}}l();if(document.querySelector("#pedido")){const m=document.querySelector('[name="liner_id"]'),p=document.querySelector('[name="pedido_id"]'),g=document.querySelector('[name="pedido2_id"]'),f=document.querySelector('[name="bobinaInterna_id"]'),h=document.querySelector('[name="bobinaIntermedia_id"]'),b=document.querySelector('[name="bobinaExterna_id"]');function u(u){if(("pedido_id"===u.target.name||"pedido2_id"===u.target.name)&&p.value===g.value)return g.value="",void s("Pedido ya seleccionado","No puede seleccionar el mismo pedido","error","#ff0000","#f8d7da");e[u.target.name]=u.target.value.trim(),console.log(e),i(),t(),c(),r(),d(),n(),o(),async function(){try{const e=await t(),o=await l(),i=await n(),c=await a(),r=parseFloat(i.ancho)||0,s=parseFloat(e.test)||0;console.log("testNormal: "+s);const d=o.filter(e=>parseFloat(e.test)===s).map(e=>({...e,ancho:parseFloat(e.ancho)}));console.log("Pedidos filtrados:",d);const u=d.find(e=>e.id!==i.id&&e.ancho>=r-2e3&&e.ancho<=r+2e3);if(u){const e=r+u.ancho;console.log("Ancho seleccionado: "+r),console.log("Ancho encontrado: "+u.ancho),console.log("Suma: "+e);const n=c.map(e=>parseFloat(e.ancho)-30).filter((e,n,o)=>o.indexOf(e)===n);console.log("Bobinas únicas después de restar 30:",n);const o=n.find(n=>n>=e);o?console.log("Bobina ideal encontrada: "+o):console.log("No se encontró una bobina adecuada para la suma.")}else console.log("No se encontró ningún ancho que cumpla con la condición.")}catch(e){console.error("Error al realizar la operación:",e)}}(),async function(){const e=await t(),n=parseFloat(e.ect)||0,o=e.liner_interno||0,a=e.liner_medio||0,i=e.liner_externo||0,c=document.getElementById("resultList");c.innerHTML="";const r=document.createElement("li");r.textContent="Ect: "+n;const s=document.createElement("li");s.textContent="Interno: "+o;const d=document.createElement("li");d.textContent="Medio: "+a;const l=document.createElement("li");l.textContent="Externo: "+i,c.appendChild(r),c.appendChild(s),c.appendChild(d),c.appendChild(l)}(),["pedido_id"].includes(u.target.name)&&document.querySelector('[name="pedido_id"]').value&&async function(){const e=await t(),o=await n(),a=parseFloat(e.test);(parseFloat(o.test)??"")===a?(console.log("Test coincide"),s("Test coincide","El test del pedido coincide con el test del liner","success","#28a745","#d4edda")):(document.querySelector('[name="pedido_id"]').value="",s("Test no coincide","El test del pedido no coincide con el test del liner","error","#ff0000","#f8d7da"))}(),["pedido_id","pedido2_id"].includes(u.target.name)&&document.querySelector('[name="pedido_id"]').value&&document.querySelector('[name="pedido2_id"]').value&&async function(){const e=await n(),t=await o(),i=await a();console.log(e.id);const c=(parseFloat(e.ancho)||0)+(parseFloat(t.ancho)||0);console.log("Ancho total de los pedidos:",c);const r=i.filter(e=>{const n=parseFloat(e.ancho);return n>=c&&n<=2e3}),d=[],l=new Set;for(let e of r){const n=parseFloat(e.ancho);l.has(n)||(d.push(e),l.add(n))}const u=d.sort((e,n)=>Math.abs(parseFloat(e.ancho)-c)-Math.abs(parseFloat(n.ancho)-c))[0];if(u){const e=u.ancho=parseFloat(u.ancho);s("Bobina ideal encontrada",`Ancho ideal: ${u.ancho} mm  -30 : ${e-30}`,"success","#28a745","#d4edda")}else console.log("No se encontró una bobina que cumpla con los requisitos.")}()}m.addEventListener("change",u),p.addEventListener("change",u),g.addEventListener("change",u),f.addEventListener("change",u),h.addEventListener("change",u),b.addEventListener("change",u)}console.log("edwin ")}(),function(){var e=document.querySelector("div .exito");e&&setTimeout((function(){e.remove()}),3e3)}(),function(){var e,n,o=document.querySelector("#maquina_id");if(o){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];i=e.map((function(e){return{nombre:"".concat(e.nombre.trim()),id:e.id}})),console.log(i)},t=function(){for(;r.firstChild;)r.removeChild(r.firstChild);if(c.length>0)c.forEach((function(e){var n=document.createElement("LI");n.classList.add("listado-maquinas__maquina"),n.textContent=e.nombre,n.dataset.id=e.id,r.appendChild(n)}));else{var e=document.createElement("P");e.classList.add("listado-maquinas__no-resultado"),e.textContent="No hay resultados",r.appendChild(e)}},i=[],c=[],r=document.querySelector("#listado-maquinas");regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e="".concat(location.origin,"/admin/api/maquinas"),o.next=4,regeneratorRuntime.awrap(fetch(e));case 4:return n=o.sent,o.next=7,regeneratorRuntime.awrap(n.json());case 7:resultado=o.sent,a(resultado);case 9:case"end":return o.stop()}})),o.addEventListener("input",(function(e){var n=e.target.value;if(n.length>3){var o=new RegExp(n,"i");c=i.filter((function(e){if(-1!=e.nombre.toLowerCase().search(o))return e}))}else c=[];t()}))}}(),function(){var e={liner_id:"",pedido_id:"",pedido2_id:"",bobinaInterna_id:"",bobinaIntermedia_id:"",bobinaExterna_id:""},n=[],o=[];function a(e,a){n=e,o=a,console.log("copia de test:".concat(n)),console.log("copia de bobinas:".concat(o))}if(document.querySelector(".pedidos")){var t=function(n){if(("pedido_id"===n.target.name||"pedido2_id"===n.target.name)&&c.value===r.value)return r.value="",void Swal.fire("Pedido ya seleccionado","No puede seleccionar el mismo pedido","error");e[n.target.name]=n.target.value.trim(),console.log(e),function(){var n,o,t,i;regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.bobinaInterna_id,c.prev=1,o="".concat(location.origin,"/admin/api/apibobinas?bobinaInterna_id=").concat(n),c.next=5,regeneratorRuntime.awrap(fetch(o));case 5:return t=c.sent,c.next=8,regeneratorRuntime.awrap(t.json());case 8:i=c.sent,console.log(i),a(i),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),console.log(c.t0);case 16:case"end":return c.stop()}}),null,null,[[1,13]])}(),function(){var n,o,t,i;regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.liner_id,c.prev=1,o="".concat(location.origin,"/admin/api/test?liner_id=").concat(n),c.next=5,regeneratorRuntime.awrap(fetch(o));case 5:return t=c.sent,c.next=8,regeneratorRuntime.awrap(t.json());case 8:a(i=c.sent),console.log(i),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(1),console.log(c.t0);case 16:case"end":return c.stop()}}),null,null,[[1,13]])}(),function(){var n,o,a,t;regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.bobinaExterna_id,i.prev=1,o="".concat(location.origin,"/admin/api/apibobina_externa?bobinaExterna_id=").concat(n),i.next=5,regeneratorRuntime.awrap(fetch(o));case 5:return a=i.sent,i.next=8,regeneratorRuntime.awrap(a.json());case 8:t=i.sent,console.log(t),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),console.log(i.t0);case 15:case"end":return i.stop()}}),null,null,[[1,12]])}(),function(){var n,o,a,t;regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.bobinaIntermedia_id,i.prev=1,o="".concat(location.origin,"/admin/api/apibobina_media?bobinaIntermedia_id=").concat(n),i.next=5,regeneratorRuntime.awrap(fetch(o));case 5:return a=i.sent,i.next=8,regeneratorRuntime.awrap(a.json());case 8:t=i.sent,console.log(t),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),console.log(i.t0);case 15:case"end":return i.stop()}}),null,null,[[1,12]])}()},i=document.querySelector('[name="liner_id"]'),c=document.querySelector('[name="pedido_id"]'),r=document.querySelector('[name="pedido2_id"]'),s=document.querySelector('[name="bobinaInterna_id"]'),d=document.querySelector('[name="bobinaIntermedia_id"]'),l=document.querySelector('[name="bobinaExterna_id"]');i.addEventListener("change",t),c.addEventListener("change",t),r.addEventListener("change",t),s.addEventListener("change",t),d.addEventListener("change",t),l.addEventListener("change",t)}}();
//# sourceMappingURL=bundle.js.map
