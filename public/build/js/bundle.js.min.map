{"version":3,"sources":["alertas.js","app.js","cotizador.js"],"names":["alertaCotizador","document","querySelector","setTimeout","remove","maquinaInput","maquinas","maquinasFiltradas","listadoMaquinas","async","url","location","origin","respuesta","fetch","resultado","json","arrayMaquinas","map","maquina","nombre","trim","id","console","log","formatearMaquinas","obtenerMaquinas","addEventListener","e","busqueda","target","value","length","expresion","RegExp","filter","toLowerCase","search","firstChild","removeChild","forEach","maquinaHTML","createElement","classList","add","textContent","dataset","appendChild","noResultado","mostrarMaquinas","test","liner_id","pedido_id","pedido2_id","bobinaInterna_id","bobinaIntermedia_id","bobinaExterna_id","arrayBobinas","arrayBobina_externa","arrayBobina_media","sumadegramaje","apibobinas","push","apibobina_externa","apibobina_media","querySelectorAll","liner","pedido","pedido2","bobinaInterna","bobinaIntermedia","bobinaExterna","name","Swal","fire","ApiBobinas","apitest","ApiTest","ApiBobina_externa","ApiBobina_media"],"mappings":"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","file":"bundle.js","sourcesContent":["(function() {\r\n\r\n    const alertaCotizador = document.querySelector('div .exito');\r\n    if(alertaCotizador) {\r\n        setTimeout(() => {\r\n            alertaCotizador.remove();\r\n        }, 3000);\r\n    }\r\n\r\n\r\n})();","(function(){\r\n    const maquinaInput = document.querySelector('#maquina_id');\r\n    if(maquinaInput){\r\n        let maquinas= [];\r\n        let maquinasFiltradas = [];\r\n\r\n        const listadoMaquinas = document.querySelector('#listado-maquinas');\r\n        obtenerMaquinas();\r\n\r\n        maquinaInput.addEventListener('input',buscarMaquinas);\r\n\r\n        async function obtenerMaquinas(){\r\n            const url = `${location.origin}/admin/api/maquinas`;;\r\n            const respuesta = await fetch(url);\r\n            resultado = await respuesta.json();\r\n            formatearMaquinas(resultado);\r\n        }\r\n\r\n\r\n        function formatearMaquinas(arrayMaquinas=[]){\r\n            maquinas = arrayMaquinas.map(maquina => {\r\n                return {\r\n                    nombre: `${maquina.nombre.trim()}`,\r\n                    id: maquina.id\r\n                }\r\n            });\r\n\r\n            console.log(maquinas);\r\n\r\n        }\r\n\r\n\r\n        function buscarMaquinas(e){\r\n           const busqueda = e.target.value;\r\n\r\n           if(busqueda.length>3){\r\n            const expresion = new RegExp(busqueda, 'i');\r\n            maquinasFiltradas = maquinas.filter(maquina =>{\r\n                if(maquina.nombre.toLowerCase().search(expresion) != -1){\r\n                    return maquina;\r\n\r\n                }\r\n            });\r\n           }else{\r\n                maquinasFiltradas = [];\r\n           }\r\n           mostrarMaquinas();\r\n        }\r\n\r\n        function mostrarMaquinas(){\r\n            while(listadoMaquinas.firstChild){\r\n                listadoMaquinas.removeChild(listadoMaquinas.firstChild);\r\n            }\r\n\r\n            if(maquinasFiltradas.length >0){\r\n                maquinasFiltradas.forEach (maquina =>{\r\n                    const maquinaHTML = document.createElement('LI');\r\n                    maquinaHTML.classList.add('listado-maquinas__maquina');\r\n                    maquinaHTML.textContent = maquina.nombre;\r\n                    maquinaHTML.dataset.id = maquina.id;\r\n    \r\n                    // anadir al html\r\n                    listadoMaquinas.appendChild(maquinaHTML);\r\n                })\r\n\r\n            }else{\r\n                const noResultado = document.createElement('P');\r\n                noResultado.classList.add('listado-maquinas__no-resultado');\r\n                noResultado.textContent = 'No hay resultados';\r\n                listadoMaquinas.appendChild(noResultado);\r\n            }\r\n\r\n\r\n\r\n          \r\n        }\r\n\r\n    }\r\n})();\r\n\r\n","(function(){\r\n\r\n    let test ={\r\n        liner_id : '',\r\n        pedido_id : '',\r\n        pedido2_id : '',\r\n        bobinaInterna_id : '',\r\n        bobinaIntermedia_id : '',\r\n        bobinaExterna_id : ''\r\n        }\r\n    \r\n  \r\n    // obtener datos del api de test\r\n    async function ApiTest(){\r\n        const {liner_id} = test;\r\n        try {\r\n            const url = `${location.origin}/admin/api/test?liner_id=${liner_id}`;\r\n            const resultado = await fetch(url);\r\n            const apitest = await resultado.json();\r\n            // mostrarApiTest(apitest);\r\n           console.log(apitest)\r\n        } catch (e) {\r\n          console.log(e);\r\n            \r\n        }\r\n    \r\n    }   \r\n    \r\n   \r\n\r\n\r\n\r\n\r\n    async function ApiBobinas(){\r\n        const {bobinaInterna_id} = test;\r\n        try {\r\n            const url = `${location.origin}/admin/api/apibobinas?bobinaInterna_id=${bobinaInterna_id}`;\r\n            const resultado = await fetch(url);\r\n            const apibobinas = await resultado.json();\r\n            sumadegramaje(apibobinas);\r\n           \r\n        } catch (e) {\r\n          console.log(e);\r\n            \r\n        }\r\n    \r\n    }\r\n\r\n    async function ApiBobina_externa(){\r\n        const {bobinaExterna_id} = test;\r\n        try {\r\n            const url = `${location.origin}/admin/api/apibobina_externa?bobinaExterna_id=${bobinaExterna_id}`;\r\n            const resultado = await fetch(url);\r\n            const apibobina_externa = await resultado.json();\r\n            sumadegramaje(apibobina_externa);\r\n           \r\n           \r\n        } catch (e) {\r\n          console.log(e);\r\n            \r\n        }\r\n    \r\n    }\r\n    async function ApiBobina_media(){\r\n        const {bobinaIntermedia_id} = test;\r\n        try {\r\n            const url = `${location.origin}/admin/api/apibobina_media?bobinaIntermedia_id=${bobinaIntermedia_id}`;\r\n            const resultado = await fetch(url);\r\n            const apibobina_media = await resultado.json();\r\n            sumadegramaje(apibobina_media);\r\n           \r\n        } catch (e) {\r\n          console.log(e);\r\n            \r\n        }\r\n    \r\n    }\r\n\r\n \r\n    let arrayBobinas = [];\r\n    let arrayBobina_externa = [];\r\n    let arrayBobina_media = [];\r\n\r\n    function sumadegramaje(apibobinas){\r\n        arrayBobinas.push(apibobinas)\r\n        console.log(arrayBobinas)\r\n    }\r\n\r\n\r\n    function sumadegramaje(apibobina_externa){\r\n        arrayBobina_externa.push(apibobina_externa)\r\n        console.log(arrayBobina_externa)\r\n    }\r\n\r\n    function sumadegramaje(apibobina_media){\r\n        arrayBobina_media.push(apibobina_media)\r\n        console.log(arrayBobina_media)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n\r\n    const pedidos = document.querySelectorAll('#pedido')\r\n\r\n    // if(pedidos ){\r\n    const  liner = document.querySelector('[name=\"liner_id\"]')\r\n    const pedido = document.querySelector('[name=\"pedido_id\"]')\r\n    const pedido2 = document.querySelector('[name=\"pedido2_id\"]')\r\n    const bobinaInterna = document.querySelector('[name=\"bobinaInterna_id\"]')\r\n    const bobinaIntermedia = document.querySelector('[name=\"bobinaIntermedia_id\"]')\r\n    const bobinaExterna = document.querySelector('[name=\"bobinaExterna_id\"]')\r\n\r\n    liner.addEventListener('change', busqueda)\r\n    pedido.addEventListener('change', busqueda)\r\n    pedido2.addEventListener('change', busqueda)\r\n    bobinaInterna.addEventListener('change', busqueda)\r\n    bobinaIntermedia.addEventListener('change', busqueda)\r\n    bobinaExterna.addEventListener('change', busqueda)\r\n\r\n    function busqueda (e){\r\n\r\n    // los pedidos no pueden ser iguales\r\n    if ((e.target.name === 'pedido_id' || e.target.name === 'pedido2_id') && pedido.value === pedido2.value) {\r\n        pedido2.value = ''\r\n        Swal.fire(\"Pedido ya seleccionado\", \"No puede seleccionar el mismo pedido\", \"error\");\r\n        return    \r\n\r\n    }else{\r\n        test[e.target.name] = e.target.value.trim()\r\n        // console.log(test)\r\n        ApiBobinas();\r\n        ApiTest();\r\n        ApiBobina_externa();\r\n        ApiBobina_media();\r\n    }\r\n\r\n}\r\n\r\n\r\n})();"]}