{"version":3,"sources":["alertas.js","app.js","cotizador.js","dist/alertas.dev.js","dist/app.dev.js","dist/cotizador.dev.js"],"names":["alertaCotizador","document","querySelector","setTimeout","remove","maquinaInput","maquinas","maquinasFiltradas","listadoMaquinas","async","url","location","origin","respuesta","fetch","resultado","json","arrayMaquinas","map","maquina","nombre","trim","id","console","log","formatearMaquinas","obtenerMaquinas","addEventListener","e","busqueda","target","value","length","expresion","RegExp","filter","toLowerCase","search","firstChild","removeChild","forEach","maquinaHTML","createElement","classList","add","textContent","dataset","appendChild","noResultado","mostrarMaquinas","peddidoDesglosado","pedidoss","pedido","estado_pedido","filtradoPendientes","dimensiones","nombreProducto","_","largo","ancho","alto","exec","tipo","test","flauta","extraerDimensiones","nombre_producto","pedidoDesglosado","nombre_cliente","numero_pedido","fecha_pedido","plazo_entrega","cantidad","subtotal","total","push","getElementById","innerHTML","JSON","stringify","desgloza","arguments","undefined","concat","regeneratorRuntime","_context","prev","next","awrap","sent","stop","liner_id","pedido_id","pedido2_id","bobinaInterna_id","bobinaIntermedia_id","bobinaExterna_id","copiaTest","copiaBobinas","copiarDatos","apitest","apibobinas","name","pedido2","Swal","fire","_context2","t0","ApiBobinas","ApiTest","_context3","ApiBobina_externa","_context4","ApiBobina_media","liner","bobinaInterna","bobinaIntermedia","bobinaExterna"],"mappings":"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","file":"bundle.js","sourcesContent":["(function() {\r\n\r\n    const alertaCotizador = document.querySelector('div .exito');\r\n    if(alertaCotizador) {\r\n        setTimeout(() => {\r\n            alertaCotizador.remove();\r\n        }, 3000);\r\n    }\r\n\r\n\r\n})();","(function(){\r\n    const maquinaInput = document.querySelector('#maquina_id');\r\n    if(maquinaInput){\r\n        let maquinas= [];\r\n        let maquinasFiltradas = [];\r\n\r\n        const listadoMaquinas = document.querySelector('#listado-maquinas');\r\n        obtenerMaquinas();\r\n\r\n        maquinaInput.addEventListener('input',buscarMaquinas);\r\n\r\n        async function obtenerMaquinas(){\r\n            const url = `${location.origin}/admin/api/maquinas`;;\r\n            const respuesta = await fetch(url);\r\n            resultado = await respuesta.json();\r\n            formatearMaquinas(resultado);\r\n        }\r\n\r\n\r\n        function formatearMaquinas(arrayMaquinas=[]){\r\n            maquinas = arrayMaquinas.map(maquina => {\r\n                return {\r\n                    nombre: `${maquina.nombre.trim()}`,\r\n                    id: maquina.id\r\n                }\r\n            });\r\n\r\n            console.log(maquinas);\r\n\r\n        }\r\n\r\n\r\n        function buscarMaquinas(e){\r\n           const busqueda = e.target.value;\r\n\r\n           if(busqueda.length>3){\r\n            const expresion = new RegExp(busqueda, 'i');\r\n            maquinasFiltradas = maquinas.filter(maquina =>{\r\n                if(maquina.nombre.toLowerCase().search(expresion) != -1){\r\n                    return maquina;\r\n\r\n                }\r\n            });\r\n           }else{\r\n                maquinasFiltradas = [];\r\n           }\r\n           mostrarMaquinas();\r\n        }\r\n\r\n        function mostrarMaquinas(){\r\n            while(listadoMaquinas.firstChild){\r\n                listadoMaquinas.removeChild(listadoMaquinas.firstChild);\r\n            }\r\n\r\n            if(maquinasFiltradas.length >0){\r\n                maquinasFiltradas.forEach (maquina =>{\r\n                    const maquinaHTML = document.createElement('LI');\r\n                    maquinaHTML.classList.add('listado-maquinas__maquina');\r\n                    maquinaHTML.textContent = maquina.nombre;\r\n                    maquinaHTML.dataset.id = maquina.id;\r\n    \r\n                    // anadir al html\r\n                    listadoMaquinas.appendChild(maquinaHTML);\r\n                })\r\n\r\n            }else{\r\n                const noResultado = document.createElement('P');\r\n                noResultado.classList.add('listado-maquinas__no-resultado');\r\n                noResultado.textContent = 'No hay resultados';\r\n                listadoMaquinas.appendChild(noResultado);\r\n            }\r\n\r\n\r\n\r\n          \r\n        }\r\n\r\n    }\r\n})();\r\n\r\n","(function(){\r\n document.addEventListener('DOMContentLoaded', function() {\r\n    iniciarApp();\r\n  });\r\n    \r\n  function iniciarApp() {\r\n    desgloza();\r\n  }\r\n\r\nasync function pedidoss() {\r\n    try {\r\n        const url = 'https://serviacrilico.com/admin/api/allpedidos2';\r\n        const resultado = await fetch(url);\r\n        const pedidos = await resultado.json();\r\n        return pedidos;\r\n\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n\r\n\r\n\r\nasync function filtradoPendientes() {\r\n    const verificar = await pedidoss(); \r\n    return verificar.filter(pedido => pedido.estado_pedido === \"pendiente\");\r\n}\r\n\r\n\r\n// function extraerDimensiones(nombreProducto) {\r\n//     const regexDimensiones = /(\\d+)(?:X|x)(\\d+)\\s*(?:X|x)?\\s*(\\d+)?\\s*(CM|cm)?/;\r\n//     const regexTipo = /\\b(K\\/K|B\\/B|T\\/T|B\\/k)\\b/i;\r\n//     const regexTest = /\\bTEST (\\d+)\\b/i;\r\n//     const regexFlauta = /\\b(C|B)\\b/i; // Ahora detecta flauta C o B\r\n\r\n//     // Extraer dimensiones\r\n//     const [_, largo, ancho, alto = 'N/A'] = regexDimensiones.exec(nombreProducto) || [];\r\n\r\n//     // Extraer tipo, test y flauta\r\n//     const tipo = (regexTipo.exec(nombreProducto) || [])[1] || 'N/A';\r\n//     const test = (regexTest.exec(nombreProducto) || [])[1] || 'N/A';\r\n//     const flauta = (regexFlauta.exec(nombreProducto) || [])[1] || 'C';\r\n\r\n//     return {\r\n//         largo: largo || 'N/A',\r\n//         ancho: ancho || 'N/A',\r\n//         alto: alto,\r\n//         tipo,\r\n//         test,\r\n//         flauta \r\n//     };\r\n// }\r\n\r\nfunction extraerDimensiones(nombreProducto) {\r\n    const regexDimensiones = /(\\d+)(?:X|x)(\\d+)\\s*(?:X|x)?\\s*(\\d+)?\\s*(CM|cm)?/;\r\n    const regexTipo = /\\b(K\\/K|B\\/B|T\\/T|B\\/k)\\b/i;\r\n    const regexTest = /\\bTEST (\\d+)\\b/i;\r\n    const regexFlauta = /\\bFLAUTA (C|B)\\b/i; // Busca explícitamente \"FLAUTA C\" o \"FLAUTA B\"\r\n\r\n    // Extraer dimensiones\r\n    const [_, largo, ancho, alto = 'N/A'] = regexDimensiones.exec(nombreProducto) || [];\r\n\r\n    // Extraer tipo, test y flauta\r\n    const tipo = (regexTipo.exec(nombreProducto) || [])[1] || 'N/A';\r\n    const test = (regexTest.exec(nombreProducto) || [])[1] || 'N/A';\r\n    let flauta = (regexFlauta.exec(nombreProducto) || [])[1] || 'C';\r\n\r\n    // Sobrescribir flauta como \"C\" si el producto contiene \"CJ\"\r\n    if (/CJ/i.test(nombreProducto)) {\r\n        flauta = 'C';\r\n    }\r\n\r\n    return {\r\n        largo: largo || 'N/A',\r\n        ancho: ancho || 'N/A',\r\n        alto: alto,\r\n        tipo,\r\n        test,\r\n        flauta\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// Función para desglosar los pedidos pendientes\r\nasync function desgloza() {\r\n    let peddidoDesglosado = [];\r\n    const pedidosPendientes = await filtradoPendientes(); \r\n    pedidosPendientes.forEach(pedido => {\r\n        const dimensiones = extraerDimensiones(pedido.nombre_producto);\r\n        const pedidoDesglosado = {\r\n            id: pedido.id,\r\n            nombre_cliente: pedido.nombre_cliente,\r\n            numero_pedido: pedido.numero_pedido,\r\n            fecha_pedido: pedido.fecha_pedido,\r\n            plazo_entrega: pedido.plazo_entrega,\r\n            nombre_producto: pedido.nombre_producto,\r\n            cantidad: pedido.cantidad,\r\n            subtotal: pedido.subtotal,\r\n            total: pedido.total,\r\n            largo: dimensiones.largo,\r\n            ancho: dimensiones.ancho,\r\n            alto: dimensiones.alto,\r\n            tipo: dimensiones.tipo, \r\n            test: dimensiones.test, \r\n            flauta: dimensiones.flauta, \r\n            \r\n        };\r\n\r\n        peddidoDesglosado.push(pedidoDesglosado);\r\n        \r\n    });\r\n    document.getElementById('pedidos').innerHTML = JSON.stringify(peddidoDesglosado, null, 2);\r\n    document.getElementById('contador').innerHTML = peddidoDesglosado.length;\r\n\r\n    console.log(peddidoDesglosado.length);\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n})();","\"use strict\";\r\n\r\n(function () {\r\n  var alertaCotizador = document.querySelector('div .exito');\r\n\r\n  if (alertaCotizador) {\r\n    setTimeout(function () {\r\n      alertaCotizador.remove();\r\n    }, 3000);\r\n  }\r\n})();","\"use strict\";\r\n\r\n(function () {\r\n  var maquinaInput = document.querySelector('#maquina_id');\r\n\r\n  if (maquinaInput) {\r\n    var obtenerMaquinas = function obtenerMaquinas() {\r\n      var url, respuesta;\r\n      return regeneratorRuntime.async(function obtenerMaquinas$(_context) {\r\n        while (1) {\r\n          switch (_context.prev = _context.next) {\r\n            case 0:\r\n              url = \"\".concat(location.origin, \"/admin/api/maquinas\");\r\n              ;\r\n              _context.next = 4;\r\n              return regeneratorRuntime.awrap(fetch(url));\r\n\r\n            case 4:\r\n              respuesta = _context.sent;\r\n              _context.next = 7;\r\n              return regeneratorRuntime.awrap(respuesta.json());\r\n\r\n            case 7:\r\n              resultado = _context.sent;\r\n              formatearMaquinas(resultado);\r\n\r\n            case 9:\r\n            case \"end\":\r\n              return _context.stop();\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    var formatearMaquinas = function formatearMaquinas() {\r\n      var arrayMaquinas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\r\n      maquinas = arrayMaquinas.map(function (maquina) {\r\n        return {\r\n          nombre: \"\".concat(maquina.nombre.trim()),\r\n          id: maquina.id\r\n        };\r\n      });\r\n      console.log(maquinas);\r\n    };\r\n\r\n    var buscarMaquinas = function buscarMaquinas(e) {\r\n      var busqueda = e.target.value;\r\n\r\n      if (busqueda.length > 3) {\r\n        var expresion = new RegExp(busqueda, 'i');\r\n        maquinasFiltradas = maquinas.filter(function (maquina) {\r\n          if (maquina.nombre.toLowerCase().search(expresion) != -1) {\r\n            return maquina;\r\n          }\r\n        });\r\n      } else {\r\n        maquinasFiltradas = [];\r\n      }\r\n\r\n      mostrarMaquinas();\r\n    };\r\n\r\n    var mostrarMaquinas = function mostrarMaquinas() {\r\n      while (listadoMaquinas.firstChild) {\r\n        listadoMaquinas.removeChild(listadoMaquinas.firstChild);\r\n      }\r\n\r\n      if (maquinasFiltradas.length > 0) {\r\n        maquinasFiltradas.forEach(function (maquina) {\r\n          var maquinaHTML = document.createElement('LI');\r\n          maquinaHTML.classList.add('listado-maquinas__maquina');\r\n          maquinaHTML.textContent = maquina.nombre;\r\n          maquinaHTML.dataset.id = maquina.id; // anadir al html\r\n\r\n          listadoMaquinas.appendChild(maquinaHTML);\r\n        });\r\n      } else {\r\n        var noResultado = document.createElement('P');\r\n        noResultado.classList.add('listado-maquinas__no-resultado');\r\n        noResultado.textContent = 'No hay resultados';\r\n        listadoMaquinas.appendChild(noResultado);\r\n      }\r\n    };\r\n\r\n    var maquinas = [];\r\n    var maquinasFiltradas = [];\r\n    var listadoMaquinas = document.querySelector('#listado-maquinas');\r\n    obtenerMaquinas();\r\n    maquinaInput.addEventListener('input', buscarMaquinas);\r\n  }\r\n})();","\"use strict\";\r\n\r\n(function () {\r\n  var test = {\r\n    liner_id: '',\r\n    pedido_id: '',\r\n    pedido2_id: '',\r\n    bobinaInterna_id: '',\r\n    bobinaIntermedia_id: '',\r\n    bobinaExterna_id: ''\r\n  };\r\n  var copiaTest = [];\r\n  var copiaBobinas = []; // obtener datos del api de test\r\n\r\n  function ApiTest() {\r\n    var liner_id, url, resultado, apitest;\r\n    return regeneratorRuntime.async(function ApiTest$(_context) {\r\n      while (1) {\r\n        switch (_context.prev = _context.next) {\r\n          case 0:\r\n            liner_id = test.liner_id;\r\n            _context.prev = 1;\r\n            url = \"\".concat(location.origin, \"/admin/api/test?liner_id=\").concat(liner_id);\r\n            _context.next = 5;\r\n            return regeneratorRuntime.awrap(fetch(url));\r\n\r\n          case 5:\r\n            resultado = _context.sent;\r\n            _context.next = 8;\r\n            return regeneratorRuntime.awrap(resultado.json());\r\n\r\n          case 8:\r\n            apitest = _context.sent;\r\n            copiarDatos(apitest);\r\n            console.log(apitest);\r\n            _context.next = 16;\r\n            break;\r\n\r\n          case 13:\r\n            _context.prev = 13;\r\n            _context.t0 = _context[\"catch\"](1);\r\n            console.log(_context.t0);\r\n\r\n          case 16:\r\n          case \"end\":\r\n            return _context.stop();\r\n        }\r\n      }\r\n    }, null, null, [[1, 13]]);\r\n  }\r\n\r\n  function ApiBobinas() {\r\n    var bobinaInterna_id, url, resultado, apibobinas;\r\n    return regeneratorRuntime.async(function ApiBobinas$(_context2) {\r\n      while (1) {\r\n        switch (_context2.prev = _context2.next) {\r\n          case 0:\r\n            bobinaInterna_id = test.bobinaInterna_id;\r\n            _context2.prev = 1;\r\n            url = \"\".concat(location.origin, \"/admin/api/apibobinas?bobinaInterna_id=\").concat(bobinaInterna_id);\r\n            _context2.next = 5;\r\n            return regeneratorRuntime.awrap(fetch(url));\r\n\r\n          case 5:\r\n            resultado = _context2.sent;\r\n            _context2.next = 8;\r\n            return regeneratorRuntime.awrap(resultado.json());\r\n\r\n          case 8:\r\n            apibobinas = _context2.sent;\r\n            console.log(apibobinas);\r\n            copiarDatos(apibobinas);\r\n            _context2.next = 16;\r\n            break;\r\n\r\n          case 13:\r\n            _context2.prev = 13;\r\n            _context2.t0 = _context2[\"catch\"](1);\r\n            console.log(_context2.t0);\r\n\r\n          case 16:\r\n          case \"end\":\r\n            return _context2.stop();\r\n        }\r\n      }\r\n    }, null, null, [[1, 13]]);\r\n  }\r\n\r\n  function copiarDatos(apitest, apibobinas) {\r\n    copiaTest = apitest;\r\n    copiaBobinas = apibobinas;\r\n    console.log(\"copia de test:\".concat(copiaTest));\r\n    console.log(\"copia de bobinas:\".concat(copiaBobinas));\r\n  }\r\n\r\n  function ApiBobina_externa() {\r\n    var bobinaExterna_id, url, resultado, apibobinas;\r\n    return regeneratorRuntime.async(function ApiBobina_externa$(_context3) {\r\n      while (1) {\r\n        switch (_context3.prev = _context3.next) {\r\n          case 0:\r\n            bobinaExterna_id = test.bobinaExterna_id;\r\n            _context3.prev = 1;\r\n            url = \"\".concat(location.origin, \"/admin/api/apibobina_externa?bobinaExterna_id=\").concat(bobinaExterna_id);\r\n            _context3.next = 5;\r\n            return regeneratorRuntime.awrap(fetch(url));\r\n\r\n          case 5:\r\n            resultado = _context3.sent;\r\n            _context3.next = 8;\r\n            return regeneratorRuntime.awrap(resultado.json());\r\n\r\n          case 8:\r\n            apibobinas = _context3.sent;\r\n            console.log(apibobinas); // mostrarApibobinas(apibobinas);\r\n\r\n            _context3.next = 15;\r\n            break;\r\n\r\n          case 12:\r\n            _context3.prev = 12;\r\n            _context3.t0 = _context3[\"catch\"](1);\r\n            console.log(_context3.t0);\r\n\r\n          case 15:\r\n          case \"end\":\r\n            return _context3.stop();\r\n        }\r\n      }\r\n    }, null, null, [[1, 12]]);\r\n  }\r\n\r\n  function ApiBobina_media() {\r\n    var bobinaIntermedia_id, url, resultado, apibobinas;\r\n    return regeneratorRuntime.async(function ApiBobina_media$(_context4) {\r\n      while (1) {\r\n        switch (_context4.prev = _context4.next) {\r\n          case 0:\r\n            bobinaIntermedia_id = test.bobinaIntermedia_id;\r\n            _context4.prev = 1;\r\n            url = \"\".concat(location.origin, \"/admin/api/apibobina_media?bobinaIntermedia_id=\").concat(bobinaIntermedia_id);\r\n            _context4.next = 5;\r\n            return regeneratorRuntime.awrap(fetch(url));\r\n\r\n          case 5:\r\n            resultado = _context4.sent;\r\n            _context4.next = 8;\r\n            return regeneratorRuntime.awrap(resultado.json());\r\n\r\n          case 8:\r\n            apibobinas = _context4.sent;\r\n            console.log(apibobinas); // mostrarApibobinas(apibobinas);\r\n\r\n            _context4.next = 15;\r\n            break;\r\n\r\n          case 12:\r\n            _context4.prev = 12;\r\n            _context4.t0 = _context4[\"catch\"](1);\r\n            console.log(_context4.t0);\r\n\r\n          case 15:\r\n          case \"end\":\r\n            return _context4.stop();\r\n        }\r\n      }\r\n    }, null, null, [[1, 12]]);\r\n  }\r\n\r\n  var pedidos = document.querySelector('.pedidos');\r\n\r\n  if (pedidos) {\r\n    var busqueda = function busqueda(e) {\r\n      // los pedidos no pueden ser iguales\r\n      if ((e.target.name === 'pedido_id' || e.target.name === 'pedido2_id') && pedido.value === pedido2.value) {\r\n        pedido2.value = '';\r\n        Swal.fire(\"Pedido ya seleccionado\", \"No puede seleccionar el mismo pedido\", \"error\");\r\n        return;\r\n      } else {\r\n        test[e.target.name] = e.target.value.trim();\r\n        console.log(test);\r\n        ApiBobinas();\r\n        ApiTest();\r\n        ApiBobina_externa();\r\n        ApiBobina_media();\r\n      }\r\n    };\r\n\r\n    var liner = document.querySelector('[name=\"liner_id\"]');\r\n    var pedido = document.querySelector('[name=\"pedido_id\"]');\r\n    var pedido2 = document.querySelector('[name=\"pedido2_id\"]');\r\n    var bobinaInterna = document.querySelector('[name=\"bobinaInterna_id\"]');\r\n    var bobinaIntermedia = document.querySelector('[name=\"bobinaIntermedia_id\"]');\r\n    var bobinaExterna = document.querySelector('[name=\"bobinaExterna_id\"]');\r\n    liner.addEventListener('change', busqueda);\r\n    pedido.addEventListener('change', busqueda);\r\n    pedido2.addEventListener('change', busqueda);\r\n    bobinaInterna.addEventListener('change', busqueda);\r\n    bobinaIntermedia.addEventListener('change', busqueda);\r\n    bobinaExterna.addEventListener('change', busqueda);\r\n  }\r\n})();"]}