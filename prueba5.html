<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Actualizar Cantidad de Bobina</title>
</head>
<body>
  <h1>Actualizar Cantidad</h1>
  <label for="id">ID de Bobina:</label>
  <input type="text" id="id" placeholder="Ingrese el ID" required>
  <br><br>
  <label for="cantidad">Nueva Cantidad:</label>
  <input type="number" id="cantidad" placeholder="Ingrese cantidad" required>
  <br><br>
  <button onclick="actualizarCantidad()">Actualizar</button>

  <p id="resultado"></p>

  <script>
    const apiUrl = "https://megawebsistem.com/admin/api/updatebobina"; // La URL de actualización

    async function actualizarCantidad() {
      const id = document.getElementById("id").value;
      const cantidad = document.getElementById("cantidad").value;
      const resultado = document.getElementById("resultado");

      if (!id || cantidad === "") {
        resultado.textContent = "Por favor, complete todos los campos.";
        resultado.style.color = "red";
        return;
      }

      try {
        const response = await fetch(`${apiUrl}/${id}`, {
          method: "PUT", // O PATCH, según tu API
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            cantidad: cantidad
          })
        });

        if (!response.ok) throw new Error("Error al actualizar la cantidad.");

        const data = await response.json();
        console.log("Respuesta del servidor:", data);

        resultado.textContent = "Cantidad actualizada correctamente.";
        resultado.style.color = "green";
      } catch (error) {
        console.error("Error:", error);
        resultado.textContent = "Hubo un error al actualizar la cantidad.";
        resultado.style.color = "red";
      }
    }
  </script>
</body>
</html>
