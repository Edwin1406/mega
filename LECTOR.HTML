<!-- Select2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

<!-- jQuery y Select2 JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>


<!-- Select de máquina -->
<select id="maquina" class="select2">
  <option value="">-- Selecciona máquina --</option>
  <option value="CORRUGADOR">CORRUGADOR</option>
  <option value="PREPRINTER">PREPRINTER</option>
</select>

<!-- Select de tipo operativo -->
<select id="tipo_operativo" class="select2">
  <option value="">-- Selecciona tipo --</option>
</select>

<!-- Contenedor de causas con campos de peso -->
<div id="causas_container"></div>



<script>
const data = {
  "CORRUGADOR": {
    "OPERATIVO": ["Empalme", "Cambio", "Recubrimiento"],
    "NO OPERATIVO": ["Mecánico", "Fallas", "Otros"]
  },
  "PREPRINTER": {
    "OPERATIVO": ["Cambio Tinta", "Ajuste Registro"],
    "NO OPERATIVO": ["Eléctrico", "Hidráulico"]
  }
};

document.getElementById("maquina").addEventListener("change", function () {
  const tipoSelect = document.getElementById("tipo_operativo");
  tipoSelect.innerHTML = '<option value="">-- Selecciona tipo --</option>';
  const maquina = this.value;

  if (maquina && data[maquina]) {
    Object.keys(data[maquina]).forEach(tipo => {
      const option = document.createElement("option");
      option.value = tipo;
      option.textContent = tipo;
      tipoSelect.appendChild(option);
    });
  }

  // limpia causas
  document.getElementById("causas_container").innerHTML = '';
});

document.getElementById("tipo_operativo").addEventListener("change", function () {
  const maquina = document.getElementById("maquina").value;
  const tipo = this.value;
  const contenedor = document.getElementById("causas_container");

  contenedor.innerHTML = ''; // limpiar antes

  if (maquina && tipo && data[maquina][tipo]) {
    data[maquina][tipo].forEach(causa => {
      const div = document.createElement("div");
      div.innerHTML = `
        <label>
          ${causa}: 
          <input type="number" step="0.01" name="peso_${causa}" placeholder="Peso (kg)">
        </label>
      `;
      contenedor.appendChild(div);
    });
  }
});
</script>
