<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtrado con Fechas y Chart.js</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .filter-container {
            margin-bottom: 20px;
        }
        label {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>Filtrado de Datos por Fechas</h1>
    <div class="filter-container">
        <label for="start-date">Fecha Inicio:</label>
        <input type="date" id="start-date">

        <label for="end-date">Fecha Fin:</label>
        <input type="date" id="end-date">

        <button onclick="filterData()">Filtrar</button>
    </div>

    <canvas id="myChart" width="400" height="200"></canvas>

    <script>
        // Datos de ejemplo (puedes reemplazar con los tuyos)
        const data = [
            { fecha: '2024-10-01', valor: 50 },
            { fecha: '2024-10-15', valor: 35 },
            { fecha: '2024-10-24', valor: 20 },
            { fecha: '2024-12-01', valor: 60 },
            { fecha: '2024-12-03', valor: 45 }
        ];

        // Función para filtrar los datos por rango de fechas
        function filterData() {
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;

            const filteredData = data.filter(item => {
                const itemDate = new Date(item.fecha);
                return (!startDate || itemDate >= new Date(startDate)) &&
                       (!endDate || itemDate <= new Date(endDate));
            });

            updateChart(filteredData);
        }

        // Configuración inicial del gráfico
        const ctx = document.getElementById('myChart').getContext('2d');
        let myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.map(item => item.fecha),
                datasets: [{
                    label: 'Valores',
                    data: data.map(item => item.valor),
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Fecha'
                        }
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Valor'
                        }
                    }
                }
            }
        });

        // Función para actualizar el gráfico con datos filtrados
        function updateChart(filteredData) {
            myChart.data.labels = filteredData.map(item => item.fecha);
            myChart.data.datasets[0].data = filteredData.map(item => item.valor);
            myChart.update();
        }
    </script>
</body>
</html>
